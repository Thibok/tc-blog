{% extends 'layout.twig' %}

{% block content %}
    
    <div id="wrap">
        <div id="main" class="container mb-5">
            <section class="row">
                <div class="col-md-8">
                    
                    {% if user.hasFlash %}

                    <div class="alert alert-info alert-dismissible text-center mt-5">
                        <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                        <span><img class="mb-1 mr-1"src="/pictures/infos.png"/>{{ user.getFlash }}</span>
                    </div>

                    {% endif %}

                    <article id="content_block" class="px-3 py-2 my-5">                
                        <a class="no_text_decoration" href="/news">Retour à la liste des news</a>
                        <h1 class="mt-3 mb-3 text-white"><img id="ico_blue" src="pictures/ico_blue.png" alt="icon"/>{{ news.getTitle }}</h1>
                        <p id="date_publish" ><span class="font-italic">{{ news.getAddAt != news.getUpdateAt ? 'Modifié' : 'Publié' }} le {{ news.getAddAt != news.getUpdateAt ? news.getUpdateAt|date("d/m/Y à H\\hi") : news.getAddAt|date("d/m/Y à H\\hi") }}</span> par <span class="font-weight-bold">{{ news.getUser }}</span></p>
                        <hr/>
                        <img class="img-fluid rounded" src="pictures/news.jpg" alt="news picture"/>
                        <hr/>
                        <p class="lead text-white">{{ news.getChapo}}</p>
                        <hr/>
                        <p class="text-white">{{ news.getContent|nl2br }}</p>
                        <hr/>
                        
                        <!-- Comment Form -->
                        <div id="comment_form"class="card my-4">
                            <h2 class="card-header">Laissez un commentaire</h2>
                            <div class="card-body">
                                {% if user.isAuthenticated %}
                                
                                <form action="" method="post">
                                    {{ commentForm | raw }}
                                    <button type="submit" class="btn btn-primary">Envoyer</button>
                                </form>

                                {% else %}

                                <p>Pas encore inscris ? Inscrivez vous maintenant pour laissez un commentaire ou connectez vous</p>
                                <div class="text-center">
                                    <a href="/connexion.html" role="button" class="btn btn-primary">Se connecter</a>
                                    <a href="/inscription.html" role="button" class="btn btn-primary">S'inscrire</a>
                                </div>

                                {% endif %}
                            </div>
                        </div>          
                        
                        {% for comment in listComments %}

                        <div class="media mb-4">
                            <img class="d-flex mr-3 rounded-circle" src="pictures/user.png" alt="user picture"/>
                            <div class="media-body col-md-12">
                                <span id="author_comment">{{ comment.getUser }}</span><small id="comment_add_at" class="ml-2">Ajouté le {{ comment.getAddAt|date("d/m/Y à H\\hi\\m\\i\\n s\\s")}}</small>
                                <p class="mt-2 text-white">{{ comment.getContent }}</p>
                            </div>
                        </div>
                        
                        {% endfor %}
                        
                        <!-- Pagination -->
                        <ul class="pagination justify-content-center mb-4">

                            {% if pagination.canPrevious %}

                            <li class="page-item">
                                <a class="page-link" href="/news-{{ news.id }}.html?page={{ pagination.getPreviousPage }}">&larr; Précédent</a>
                            </li>

                            {% else %}

                            <li class="page-item disabled">
                                <a class="page-link" href="/news-{{ news.id }}.html?page={{ pagination.getPreviousPage }}">&larr; Précédent</a>
                            </li>

                            {% endif %}

                            {% if pagination.canNext %}

                            <li class="page-item">
                                <a class="page-link" href="/news-{{ news.id }}.html?page={{ pagination.getNextPage }}">Suivant &rarr;</a>
                            </li>

                            {% else %}

                            <li class="page-item disabled">
                                <a class="page-link" href="/news-{{ news.id }}.html?page={{ pagination.getNextPage }}">Suivant &rarr;</a>
                            </li>

                            {% endif %}

                        </ul>
                    </article>
                </div>
                
                <!-- Sidebar Column -->
                <div class="col-md-4 mt-2">
                    <aside class="card my-4" id="aside">
                        <img id="profil_picture"class="img-center" src="pictures/profil.jpg" alt="developer photo"/>
                        <div class="card-body">
                            <legend class="card-title text-center text-white">Thibault le développeur qu'il vous faut ! </legend>
                            <div class="d-flex justify-content-center">
                                <a class="p-2" href="https://github.com/Thibok" target="_blank"><i id="github" class="fa fa-github"></i></a>
                                <a class="p-2" href="https://twitter.com/TCavailles" target="_blank"><i id="twitter" class="fa fa-twitter"></i></a>
                                <a class="p-2" href="https://www.linkedin.com/in/thibault-cavailles-b40061146/" target="_blank"><i class="fa fa-linkedin text-white"></i></a>
                                <a class="p-2" href="C.V.pdf" target="_blank"><i id="cv"class="fa fa-user"></i></a>
                            </div>
                        </div>
                    </aside>
                    <!-- Contact Form -->
                    <div class="col-md-12 my-4 p-3" id="contact">
                        <form method="post" action="">
                            <h2 class="text-white">Contact</h2>
                            <div class="form-group">
                                <label class="control-label text-white"for="name">Nom :</label>
                                <input type="text" name="name" id="name" class="form-control"/>
                            </div>
                            <div class="form-group"> 
                                <label class="control-label text-white" for="first_name">Prénom :</label>
                                <input class="form-control" type="text" name="first_name" id="first_name"/>
                            </div>
                            <div class="form-group">
                                <label class="control-label text-white" for="email">Email :</label>
                                <input type="email" name="email" id="email" class="form-control"/>
                            </div>
                            <div class="form-group">
                                <label class="control-label text-white" for="message">Message :</label>
                                <textarea id="message" class="form-control" rows="4"></textarea>
                                <p class="help-block text-white">Vous pouvez agrandir la fenêtre</p>
                            </div>
                            <button type="submit" class="btn btn-primary">Envoyer</button>
                        </form>
                    </div>
                </div>
            </section>
        </div>
    </div>
{% endblock %}

